(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["index"],{2708:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a={data:function(){return{}},filters:{},methods:{validEmail:function(e,t,r){console.log(t);var a=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;a.test(t)||r(new Error("邮箱格式不正确")),r()}}}},"365c":function(e,t,r){"use strict";r("d3b7");var a=r("bc3a"),o=r.n(a);o.a.defaults.withCredentials=!0;var i=o.a.create({baseURL:"",timeout:8e3});i.interceptors.request.use((function(e){return console.log("config: ",e),e}),(function(e){return console.log(e),Promise.reject()})),i.interceptors.response.use((function(e){if(200===e.status)return e.data;Promise.reject()}),(function(e){return console.log(e),Promise.reject()}));var n=i;r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return s})),r.d(t,"c",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return m})),r.d(t,"d",(function(){return d}));var l=function(e){return n({url:"/send",method:"post",data:e})},s=function(e){return n({url:"/extract",method:"post",data:e})},c=function(e){return n({url:"/getPublicLetter",method:"get",params:e})},u=function(e){return n({url:"/getAllLetter",method:"get",params:e})},m=function(e){return n({url:"/byExtractGetEmail",method:"post",data:e})},d=function(e){return n({url:"/getQuestion",method:"get",params:e})}},"37f9":function(e,t,r){"use strict";r.r(t);var a,o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"index-box"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"190px",size:"small","label-position":"left"}},[r("el-form-item",{staticClass:"media-mobile",attrs:{label:"您的昵称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请填写昵称, 将在邮件的标题中出现"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{staticClass:"media-mobile",attrs:{label:"收件邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:"可以是你自己, 或是任何一个你想倾诉的人. 填写TA的邮箱地址, 形如 abc@163.com"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),r("el-form-item",{staticClass:"media-mobile media-date-time",attrs:{label:"发信时间",required:""}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{staticClass:"not-media-mobile",attrs:{prop:"date1"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":e.pickerOptions1,type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.date1,callback:function(t){e.$set(e.ruleForm,"date1",t)},expression:"ruleForm.date1"}})],1)],1),r("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),r("el-col",{attrs:{span:11}},[r("el-form-item",{staticClass:"not-media-mobile",attrs:{prop:"date2"}},[r("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择时间"},model:{value:e.ruleForm.date2,callback:function(t){e.$set(e.ruleForm,"date2",t)},expression:"ruleForm.date2"}})],1)],1)],1),r("el-form-item",{staticClass:"media-mobile",attrs:{label:"是否公开",prop:"type"}},[r("el-checkbox",{attrs:{label:'选中后, 信的内容将在"公开信"中展示, 所有人都可以浏览和评论'},model:{value:e.ruleForm.public,callback:function(t){e.$set(e.ruleForm,"public",t)},expression:"ruleForm.public"}})],1),r("div",{staticClass:"edit_container"},[r("quill-editor",{ref:"myQuillEditor",attrs:{options:e.editorOption},on:{blur:function(t){return e.onEditorBlur(t)},focus:function(t){return e.onEditorFocus(t)},change:function(t){return e.onEditorChange(t)}},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1),r("el-form-item",{staticClass:"not-media-mobile"},[r("div",{staticClass:"verification-box"},[r("img",{staticStyle:{"margin-right":"20px"},attrs:{src:e.imgSrc},on:{click:e.changeImg}}),r("el-form-item",{attrs:{prop:"verificationCode"}},[r("el-input",{staticStyle:{width:"140px","margin-right":"20px"},attrs:{placeholder:"输入验证码"},model:{value:e.ruleForm.verificationCode,callback:function(t){e.$set(e.ruleForm,"verificationCode",t)},expression:"ruleForm.verificationCode"}})],1),r("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")])],1)])],1)],1)},i=[],n=(r("99af"),r("b0c0"),r("1276"),r("2fa7")),l=(r("560b"),r("450d"),r("dcdc")),s=r.n(l),c=(r("f4f9"),r("c2cc")),u=r.n(c),m=(r("4ffc"),r("946e")),d=r.n(m),f=(r("826b"),r("c263")),p=r.n(f),b=(r("eca7"),r("3787")),g=r.n(b),h=(r("425f"),r("4105")),v=r.n(h),F=r("953d"),C=(r("a753"),r("8096"),r("14e1"),r("365c")),x=r("5a0c"),w=r.n(x),$=r("2708"),k={components:(a={},Object(n["a"])(a,v.a.name,v.a),Object(n["a"])(a,g.a.name,g.a),Object(n["a"])(a,p.a.name,p.a),Object(n["a"])(a,d.a.name,d.a),Object(n["a"])(a,u.a.name,u.a),Object(n["a"])(a,s.a.name,s.a),Object(n["a"])(a,"quillEditor",F["quillEditor"]),a),mixins:[$["a"]],data:function(){return{pickerOptions1:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},ruleForm:{name:"",email:"",date1:"",date2:"",public:!1,content:"",verificationCode:""},rules:{name:[{required:!0,message:"请输入您的昵称",trigger:"blur"}],email:[{required:!0,message:"请输入收件邮箱",trigger:"blur"},{validator:this.validEmail,trigger:"blur"}],date1:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],type:[{required:!1}],verificationCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},editorOption:{},imgSrc:"/captcha?"+(new Date).getTime()}},beforeMount:function(){},computed:{editor:function(){return this.$refs.myQuillEditor.quill},url:function(){return""}},mounted:function(){},methods:{handleSelect:function(){},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;if(t.ruleForm.content){var r={name:t.ruleForm.name,receiptEmail:t.ruleForm.email,sendTime:t.jointDate(),isPublic:t.ruleForm.public,content:t.ruleForm.content,verificationCode:t.ruleForm.verificationCode};if(t.compareToNow(r.sendTime))return void t.$message("亲, 请选择未来时间发送!");var a=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(C["e"])(r).then((function(e){console.log(e),a.close(),e.statusCode?(t.$message({showClose:!0,message:"发送成功",type:"success"}),setTimeout((function(){t.$storage.write("email-data",e.data||{}),t.$router.push("extract")}),400)):t.$message.error(e.message)})).catch((function(e){a.close(),t.$message.error("发送失败, 请稍后重试")}))}else t.$message("请输入邮件内容")}))},resetForm:function(e){this.$refs[e].resetFields()},onEditorReady:function(e){},onEditorBlur:function(){},onEditorFocus:function(){},onEditorChange:function(){},changeImg:function(e){console.log(this.url),this.imgSrc=this.url+"/captcha?"+(new Date).getTime()},jointDate:function(){var e=w()(this.ruleForm.date1).format("YYYY-MM-DD HH:mm:ss").split(" ")[0],t=w()(this.ruleForm.date2).format("YYYY-MM-DD HH:mm:ss").split(" ")[1];return"".concat(e," ").concat(t)},compareToNow:function(e){var t=!1;return e&&(new Date).getTime()>new Date(e).getTime()&&(t=!0),t}}},E=k,y=(r("9a2b"),r("2877")),j=Object(y["a"])(E,o,i,!1,null,"59ca873f",null);t["default"]=j.exports},"9a2b":function(e,t,r){"use strict";var a=r("b883"),o=r.n(a);o.a},b883:function(e,t,r){}}]);